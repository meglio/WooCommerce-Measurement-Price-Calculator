jQuery(document).ready(function(a){"use strict";function b(b){var c=String(wc_price_calculator_admin_params.woocommerce_currency_symbol),d=c+" / "+b,e=a('label[for="_regular_price"]');e.html(e.html().replace(c,d));var f=a('label[for="_sale_price"]');f.html(f.html().replace(c,d)),a('.woocommerce_variable_attributes input[type="text"], .woocommerce_variable_attributes input[type="number"]').each(function(b,e){e=a(e),!e.attr("name")||"variable_price"!==e.attr("name").substr(0,14)&&"variable_regular_price"!==e.attr("name").substr(0,22)&&"variable_sale_price"!==e.attr("name").substr(0,19)||e.prev().html(e.prev().html().replace(c,d))});var g=a(".wc-calculator-pricing-table .measurement-range-column span.column-title");g.text(g.data("text")+" ("+b+")"),g=a(".wc-calculator-pricing-table .price-per-unit-column span.column-title"),g.text(g.data("text")+" ("+wc_price_calculator_admin_params.woocommerce_currency_symbol+" / "+b+")"),g=a(".wc-calculator-pricing-table .sale-price-per-unit-column span.column-title"),g.text(g.data("text")+" ("+wc_price_calculator_admin_params.woocommerce_currency_symbol+" / "+b+")")}function c(){var b=new RegExp(/\(([^)]+)\)/),c="("+String(wc_price_calculator_admin_params.woocommerce_currency_symbol)+")",d=a('label[for="_regular_price"]');d.html(d.html().replace(b,c));var e=a('label[for="_sale_price"]');e.html(e.html().replace(b,c)),a('.woocommerce_variable_attributes input[type="text"]').each(function(d,e){e=a(e),!e.attr("name")||"variable_price"!==e.attr("name").substr(0,14)&&"variable_regular_price"!==e.attr("name").substr(0,22)&&"variable_sale_price"!==e.attr("name").substr(0,19)||e.prev().html(e.prev().html().replace(b,c))})}function d(b){e();var c=a('label[for="_stock"]').text()+" ("+b+")";a('label[for="_stock"]').text(c),a('.woocommerce_variable_attributes input[type="number"]').each(function(c,d){if(d=a(d),"variable_stock"===d.attr("name").substr(0,14)){var e=d.prev().text().indexOf(":"),f=d.prev().text().substr(0,e)+" ("+b+"):";d.prev().text(f)}})}function e(){var b=a('label[for="_stock"]').text();-1!==b.indexOf("(")&&(b=b.substr(0,b.indexOf("(")-1),a('label[for="_stock"]').text(b)),a('.woocommerce_variable_attributes input[type="number"]').each(function(b,c){if(c=a(c),"variable_stock"===c.attr("name").substr(0,14)){var d=c.prev().text();-1!==d.indexOf("(")&&(d=d.substr(0,d.indexOf("(")-1)+":",c.prev().text(d))}})}function f(b){g();var c=a('label[for="_weight"]').text().substr(0,a('label[for="_weight"]').text().indexOf("("))+"("+wc_price_calculator_admin_params.woocommerce_weight_unit+" / "+b+")";a('label[for="_weight"]').text(c),a('.woocommerce_variable_attributes input[type="number"]').each(function(c,d){if(d=a(d),"variable_weight"===d.attr("name").substr(0,15)){var e=d.prev().text()+" ("+wc_price_calculator_admin_params.woocommerce_weight_unit+" / "+b+")";d.prev().text(e)}})}function g(){var b=a('label[for="_weight"]').text().substr(0,a('label[for="_weight"]').text().indexOf("("))+"("+wc_price_calculator_admin_params.woocommerce_weight_unit+")";a('label[for="_weight"]').text(b),a('.woocommerce_variable_attributes input[type="number"]').each(function(b,c){if(c=a(c),"variable_weight"===c.attr("name").substr(0,15)){var d=c.prev().text();-1!==d.indexOf("(")&&(d=d.substr(0,d.indexOf("(")-1),c.prev().text(d))}})}function h(){a("._weight_field").show(),a('.woocommerce_variable_attributes input[type="number"]').each(function(b,c){c=a(c),"variable_weight"===c.attr("name").substr(0,15)&&c.prev().show()})}function i(){a("._weight_field").hide(),a('.woocommerce_variable_attributes input[type="number"]').each(function(b,c){c=a(c),"variable_weight"===c.attr("name").substr(0,15)&&c.prev().hide()})}function j(){a(".measurement_description").hide(),a(".measurement_fields").hide()}function k(b){b&&a(".wc-calculator-pricing-table tbody tr").size()>0?l():m()}function l(){""!==a("#_regular_price").val()&&a("#_regular_price").data("orig-value",a("#_regular_price").val()).val(""),a("#_regular_price").closest(".form-field").hide(),""!==a("#_sale_price").val()&&a("#_sale_price").data("orig-value",a("#_sale_price").val()).val(""),a("#_sale_price").closest(".form-field").hide(),a('.woocommerce_variable_attributes input[type="text"], .woocommerce_variable_attributes input[type="number"]').each(function(b,c){c=a(c),!c.attr("name")||"variable_price"!==c.attr("name").substr(0,14)&&"variable_regular_price"!==c.attr("name").substr(0,22)&&"variable_sale_price"!==c.attr("name").substr(0,19)||(c.prop("readonly",!0),a(".pricing-rules-enabled-notice."+c.attr("id")).length||c.after('<small class="pricing-rules-enabled-notice '+c.attr("id")+'">'+wc_price_calculator_admin_params.pricing_rules_enabled_notice+"</small>"),""!==c.val()&&c.data("orig-value",c.val()))})}function m(){void 0!==a("#_regular_price").data("orig-value")&&""!==a("#_regular_price").data("orig-value")&&(a("#_regular_price").val(a("#_regular_price").data("orig-value")),a("#_regular_price").data("orig-value","")),a("#_regular_price").closest(".form-field").show(),void 0!==a("#_sale_price").data("orig-value")&&""!==a("#_sale_price").data("orig-value")&&(a("#_sale_price").val(a("#_sale_price").data("orig-value")),a("#_sale_price").data("orig-value","")),a("#_sale_price").closest(".form-field").show(),a('.woocommerce_variable_attributes input[type="text"], .woocommerce_variable_attributes input[type="number"]').each(function(b,c){c=a(c),!c.attr("name")||"variable_price"!==c.attr("name").substr(0,14)&&"variable_regular_price"!==c.attr("name").substr(0,22)&&"variable_sale_price"!==c.attr("name").substr(0,19)||(c.prop("readonly",!1),a(".pricing-rules-enabled-notice").remove(),void 0!==c.data("orig-value")&&""!==c.data("orig-value")&&(c.val(c.data("orig-value")),c.data("orig-value","")))})}function n(){var b=0;a("table.wc-calculator-pricing-table tbody tr").each(function(c,d){a("input",d).each(function(a,c){var d=jQuery(c);d.attr("name",d.attr("name").replace(/\[([^[]*)\]/,"["+b+"]"))}),b++})}a("input#_manage_stock").change(function(){a(this).is(":checked")?a("p.stock_fields").show():a("p.stock_fields").hide()}).change(),a("._measurement_pricing").change(function(){"_measurement_"+a("#_measurement_price_calculator").val()+"_pricing"===a(this).attr("id")&&(a(this).is(":checked")?a(this).closest("div.measurement_fields").find("._measurement_pricing_fields").show():a(this).closest("div.measurement_fields").find("._measurement_pricing_fields").hide(),a(this).closest("div").find("._measurement_pricing_calculator_enabled").change())}),a("._measurement_pricing_calculator_enabled").change(function(){if("_measurement_"+a("#_measurement_price_calculator").val()+"_pricing_calculator_enabled"===a(this).attr("id")){a(this).closest("div.measurement_fields").find("._measurement_pricing").is(":checked")&&a(this).is(":checked")?(b(a(this).closest("div").find("._measurement_pricing_unit option:selected").text()),a(this).closest("div.measurement_fields").find("._measurement_editable").attr("checked","checked").attr("disabled","disabled"),a(this).closest("div.measurement_fields").find("._measurement_pricing_calculator_fields").show(),a(".wc-measurement-price-calculator-pricing-table").removeClass("disabled"),k(!0),a(".show_if_pricing_calculator").show()):(c(),a(this).closest("div.measurement_fields").find("._measurement_editable").is(":disabled")&&a(this).closest("div").find("._measurement_editable").removeAttr("disabled"),a(this).closest("div.measurement_fields").find("._measurement_pricing_calculator_fields").hide(),a(".wc-measurement-price-calculator-pricing-table").addClass("disabled"),k(!1),a(".show_if_pricing_calculator").hide());var d=a(this).closest("div");d.find("._measurement_pricing_inventory_enabled").trigger("change"),d.find("._measurement_pricing_weight_enabled").trigger("change"),d.closest(".measurement_fields").find("._measurement_accepted_input").trigger("change")}}),a("#measurement_product_data").on("change","._measurement_accepted_input",function(){var b=a(this),c=b.data(),d=c[b.val()],e=a(this).closest("div"),f=a("#_measurement_"+a("#_measurement_price_calculator").val()+"_pricing_calculator_enabled").is(":checked"),g=[];for(var h in c)c.hasOwnProperty(h)&&g.push(c[h]);var i=e.find(g.join(",")).hide();f&&i.filter(d).show()}).on("click","._measurement_input_attributes label",function(){a(this).closest("p").find(".wrap input:first-child").trigger("focus")}),setTimeout(function(){var b=window.location.hash;if(null!==b.match(/\#[a-z0-9\-]+/))try{a('a[href="'+b+'"]').trigger("click")}catch(a){}},250),a("select._measurement_accepted_input").on("change",function(){var b=a(this).closest("p"),c=b.next(),d=c.next();"free"===a(this).val()?d.find("input").val(""):c.find("input").val("")}),a("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){a("#_measurement_"+a("#_measurement_price_calculator").val()+"_pricing_calculator_enabled").change()}),a("._measurement_pricing_inventory_enabled").change(function(){if("_measurement_"+a("#_measurement_price_calculator").val()+"_pricing_inventory_enabled"===a(this).attr("id")){var b=a("#_measurement_"+a("#_measurement_price_calculator").val()+"_pricing_calculator_enabled");b.is(":checked")&&a(this).is(":checked")?d(a(this).closest("div").find("._measurement_pricing_unit option:selected").text()):e()}}),a("._measurement_pricing_weight_enabled").change(function(){if(wc_price_calculator_admin_params.woocommerce_weight_unit&&"_measurement_"+a("#_measurement_price_calculator").val()+"_pricing_weight_enabled"===a(this).attr("id")){var b=a("#_measurement_"+a("#_measurement_price_calculator").val()+"_pricing_calculator_enabled");b.is(":checked")&&a(this).is(":checked")?"weight"===a("#_measurement_price_calculator").val()?i():(h(),f(a(this).closest("div").find("._measurement_pricing_unit option:selected").text())):(h(),g())}}),a(".woocommerce_variations").bind("woocommerce_variations_added",function(){a("._measurement_pricing").change()}),a("._measurement_pricing_unit").change(function(){a("._measurement_pricing").change()}),a("#_measurement_price_calculator").change(function(){var b=a(this).val();j(),a(".wc-measurement-price-calculator-pricing-table").addClass("disabled"),a("._measurement_pricing").change(),b?(a("#"+b+"_measurements").show().find("._measurement_accepted_input").trigger("change"),a("#"+b+"_description").show()):(c(),a(".show_if_pricing_calculator").hide()),"dimension"===b&&a("._measurement_dimension").change()}),a("._measurement_dimension").change(function(){a("._measurement_dimension").each(function(b,c){var d=a(c).attr("id");a("#"+d).is(":checked")?a("#"+d+"_fields").show():a("#"+d+"_fields").hide()})}),a(".measurement-subnav a").click(function(){var b=a(this);return!a(this).hasClass("disabled")&&(a(".measurement-subnav a").removeClass("active"),b.addClass("active"),a(".calculator-subpanel").hide(),a(b.attr("href")).show(),!1)}).eq(0).click(),a("button.wc-calculator-pricing-table-add-rule").click(function(){var b=a("table.wc-calculator-pricing-table tbody tr").length;a("table.wc-calculator-pricing-table > tbody").append('<tr class="wc-calculator-pricing-rule"><td class="check-column"><input type="checkbox" name="select" /></td>\t\t\t<td class="wc-calculator-pricing-rule-range"><input type="text" name="_wc_measurement_pricing_rule_range_start['+b+']" value="" /> - <input type="text" name="_wc_measurement_pricing_rule_range_end['+b+']" value="" /></td>\t\t\t<td><input type="text" name="_wc_measurement_pricing_rule_regular_price['+b+']" value="" /></td>\t\t\t<td><input type="text" name="_wc_measurement_pricing_rule_sale_price['+b+']" value="" /></td></tr>'),k(!0),n()}),a("button.wc-calculator-pricing-table-delete-rules").click(function(){a("table.wc-calculator-pricing-table td.check-column input:checked").each(function(){a(this).closest("tr.wc-calculator-pricing-rule").fadeOut("400",function(){a(this).remove(),a.queue(this,"fx",function(){k(!0)})})}),a(".wc-calculator-pricing-table thead .check-column input").removeAttr("checked"),k(!0),n()}),a("table.wc-calculator-pricing-table tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style"),n()}}),j(),a("#_measurement_price_calculator").change(),a("._measurement_dimension").change(),a("select#product-type").on("change",function(){a("input#_wc_measurement_price_calculator_min_price").val("")})});